# NewsPortal API

Этот проект представляет собой серверную часть новостного портала, разработанную на .NET Minimal API. 
Приложение предоставляет RESTful API для работы со статьями и комментариями, используя PostgreSQL в качестве базы данных и Redis 
для кеширования.

---

## 📋 Описание проекта

### Основные функции:
1. **Получение всех статей с рейтингом больше 50**:
   - Эндпоинт: `GET /articles`
   - Возвращает список статей, средний рейтинг которых больше 50.

2. **Получение статьи по ID**:
   - Эндпоинт: `GET /articles/{id}`
   - Возвращает статью с указанным ID.

3. **Получение статьи дня**:
   - Эндпоинт: `GET /articles/trending`
   - Возвращает случайную статью из списка 10 самых популярных статей. Результат кешируется в Redis на 10 минут.

---

## 🛠 Технологии

- **.NET 8**: Основной стек разработки.
- **PostgreSQL**: База данных для хранения статей и комментариев.
- **Redis**: Кеширование данных для повышения производительности.
- **Docker**: Контейнеризация приложения и зависимостей.
- **Entity Framework Core**: ORM для работы с базой данных.

---

## 🚀 Запуск проекта

### Требования:
- Установленный Docker и Docker Compose.

### Шаги для запуска:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-repo/news-portal.git
   cd news-portal
   ```

2. Соберите и запустите контейнеры:
   ```bash
   docker-compose up --build
   ```

3. После успешного запуска приложение будет доступно по адресу:
   - **API**: `http://localhost:5000`
   - **PostgreSQL**: `localhost:5432`
   - **Redis**: `localhost:6379`

---

## 📂 Структура проекта

```
NewsPortal/
├── Dockerfile
├── docker-compose.yml
├── appsettings.json
├── Program.cs
├── Models/
│   ├── Article.cs
│   └── Comment.cs
├── Data/
│   └── NewsPortalContext.cs
```

---

## 🌐 API Endpoints

### 1. Получить все статьи с рейтингом больше 50
- **Метод**: `GET`
- **URL**: `/articles`
- **Пример ответа**:
  ```json
  [
    {
      "id": 1,
      "title": "Новость 1",
      "content": "Содержание новости 1",
      "rating": 75
    },
    {
      "id": 2,
      "title": "Новость 2",
      "content": "Содержание новости 2",
      "rating": 85
    }
  ]
  ```

### 2. Получить статью по ID
- **Метод**: `GET`
- **URL**: `/articles/{id}`
- **Пример ответа**:
  ```json
  {
    "id": 1,
    "title": "Новость 1",
    "content": "Содержание новости 1",
    "rating": 75
  }
  ```

### 3. Получить статью дня
- **Метод**: `GET`
- **URL**: `/articles/trending`
- **Пример ответа**:
  ```json
  {
    "id": 3,
    "title": "Новость 3",
    "content": "Содержание новости 3",
    "rating": 95
  }
  ```

---

## 🧑‍💻 Разработка

### Локальная разработка:
1. Убедитесь, что у вас установлены .NET SDK, PostgreSQL и Redis.
2. Обновите строки подключения в `appsettings.json`:
   ```json
   {
     "ConnectionStrings": {
       "DefaultConnection": "Host=localhost;Database=NewsPortal;Username=postgres;Password=postgres",
       "Redis": "localhost"
     }
   }
   ```
3. Запустите приложение:
   ```bash
   dotnet run
   ```

### Миграции:
1. Создайте миграцию:
   ```bash
   dotnet ef migrations add InitialCreate
   ```
2. Примените миграцию:
   ```bash
   dotnet ef database update
   ```

---

## 🐛 Отладка

- **Логи приложения**: Логи выводятся в консоль при запуске через Docker.
- **Логи PostgreSQL**: Логи можно найти в контейнере PostgreSQL.
- **Логи Redis**: Логи можно найти в контейнере Redis.

---

## 📝 Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).

---

## 🤝 Вклад в проект

Если вы хотите внести свой вклад в проект, пожалуйста, создайте Pull Request. Мы приветствуем любые улучшения и исправления!

---

**Спасибо за использование NewsPortal API!** 🚀